(function(){ActiveAdmin.Popover=function(){function Popover(options,element){var defaults;this.options=options,this.element=element,this.$element=$(this.element),defaults={fadeInDuration:20,fadeOutDuration:100,autoOpen:!0,pageWrapperElement:"#wrapper",onClickActionItemCallback:null},this.options=$.extend(defaults,options),this.isOpen=!1,(this.$popover=$(this.$element.attr("href"))).length||(this.$popover=this.$element.next(".popover")),this._buildPopover(),this._bind()}return Popover.prototype.open=function(){return this.isOpen=!0,this.$popover.fadeIn(this.options.fadeInDuration),this._positionPopover(),this._positionNipple(),this},Popover.prototype.close=function(){return this.isOpen=!1,this.$popover.fadeOut(this.options.fadeOutDuration),this},Popover.prototype.destroy=function(){return this.$element.removeData("popover"),this.$element.unbind(),this.$element=null,this},Popover.prototype._buildPopover=function(){return this.$nipple=$('<div class="popover_nipple"></div>'),this.$popover.prepend(this.$nipple),this.$popover.hide(),this.$popover.addClass("popover")},Popover.prototype._bind=function(){return $(this.options.pageWrapperElement).click(function(_this){return function(){return _this.isOpen?_this.close():void 0}}(this)),this.options.autoOpen?this.$element.click(function(_this){return function(e){return e.stopPropagation(),_this.isOpen?_this.close():_this.open()}}(this)):void 0},Popover.prototype._positionPopover=function(){var button_center,popover_center;return button_center=this.$element.offset().left+this.$element.outerWidth()/2,popover_center=this.$popover.outerWidth()/2,this.$popover.css("left",button_center-popover_center)},Popover.prototype._positionNipple=function(){return this.$popover.css("top",this.$element.offset().top+this.$element.outerHeight()+10),this.$nipple.css("left",this.$popover.outerWidth()/2-this.$nipple.outerWidth()/2)},Popover}(),$.widget.bridge("popover",ActiveAdmin.Popover)}).call(this);