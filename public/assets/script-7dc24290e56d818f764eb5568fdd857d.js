$(function(){new cbpScroller(document.getElementById("cbp-so-scroller"));var lastId,menu=$("#menu"),menuHeight=menu.outerHeight()+15,menuItems=menu.find("a"),scrollItems=menuItems.map(function(){var item=$($(this).attr("href"));return item.length?item:void 0});$(window).scroll(function(){var scroll=$(window).scrollTop();scroll>=450&&$(".navbar").addClass("affix"),450>scroll&&$(".navbar").removeClass("affix");var fromTop=$(this).scrollTop()+menuHeight,current=scrollItems.map(function(){return $(this).offset().top<fromTop?this:void 0});current=current[current.length-1];var currentid=current&&current.length?current[0].id:"";lastId!==currentid&&(lastId=currentid,menuItems.parent().removeClass("active").end().filter("[href=#"+currentid+"]").parent().addClass("active"))});$(window).height(),$(window).width()});